# 9.2. Vistas

# Vistas de reclutamiento

## 1. Vista: `vista_resumen_vacantes`

**Descripción:** Muestra un resumen de las vacantes publicadas, incluyendo el total de postulaciones y postulaciones aceptadas.

```sql
CREATE VIEW vista_resumen_vacantes AS
SELECT 
    V.idVacante,
    V.nombrepuesto AS puesto,
    V.area,
    V.ubicacion,
    V.tipocontrato,
    V.fechainicio,
    V.fechacierre,
    COUNT(P.idPostulacion) AS total_postulaciones,
    AVG(P.estado) FILTER (WHERE P.estado = 2) AS postulaciones_aceptadas
FROM Vacante V
LEFT JOIN Postulacion P ON V.idVacante = P.idVacante
GROUP BY V.idVacante, V.nombrepuesto, V.area, V.ubicacion, V.tipocontrato, V.fechainicio, V.fechacierre;
```
## 2. Vista: `vista_postulaciones_detalle`

**Descripción:** Detalles de las postulaciones, incluyendo la información del candidato y el estado actual.

```sql
CREATE VIEW vista_postulaciones_detalle AS
SELECT 
    P.idPostulacion,
    P.fecha_postulacion,
    P.estado AS estado_postulacion,
    C.ID_candidato,
    C.nombre AS nombre_candidato,
    C.correo,
    C.telefono,
    V.nombrepuesto AS vacante,
    V.area,
    V.ubicacion
FROM Postulacion P
JOIN Candidato C ON P.ID_candidato = C.ID_candidato
JOIN Vacante V ON P.idVacante = V.idVacante;
```

## 3. Vista: `vista_candidatos_postulaciones`

**Descripción:** Lista de candidatos con el número de postulaciones que han realizado.
```sql
CREATE VIEW vista_candidatos_postulaciones AS
SELECT 
    C.ID_candidato,
    C.nombre,
    C.correo,
    COUNT(P.idPostulacion) AS total_postulaciones
FROM Candidato C
LEFT JOIN Postulacion P ON C.ID_candidato = P.ID_candidato
GROUP BY C.ID_candidato, C.nombre, C.correo;
```

## 4. Vista: `vista_vacantes_sin_postulaciones`

**Descripción:** Vacantes que no han recibido ninguna postulación.
```sql
CREATE VIEW vista_vacantes_sin_postulaciones AS
SELECT 
    V.idVacante,
    V.nombrepuesto,
    V.area,
    V.ubicacion,
    V.fechainicio,
    V.fechacierre
FROM Vacante V
LEFT JOIN Postulacion P ON V.idVacante = P.idVacante
WHERE P.idPostulacion IS NULL;
```

# 8.1. Sentencias SQL por módulo / prototipo

## 1. Sentencias SQL del módulo de

## 2. Sentencias SQL del módulo de Reclutamiento
**Caso 1**
|Codigo Requerimiento	|R201|
|---|---|
|Codigo Interfaz|	I201|
|Imagen Interfaz|	![image](https://github.com/fiis-bd242/bd242-grupo4/raw/main/4/4.5/image-1.png) ![alt text](image-1.png) ![alt text](image-2.png) ![alt text](image-3.png)|

## 3. Sentencias SQL del módulo de CRM

**Caso 1**

|Codigo Requerimiento	|R301|
|---|---|
|Codigo Interfaz|	I301|
|Imagen Interfaz|	![image (14)](https://github.com/user-attachments/assets/6cc1cb9e-e081-460d-b8af-4b9be31dd6a2)|

Eventos:

1. Al cargar la pagina se dara una presentacion de bienvenida al cliente mostrando como identenficacion su nombre, luego al presionar solicitar permiso se cargara otra pagina.

``` sql

select cli.Nombre as Nombre_Cliente from Cliente cli where cli.estado_cliente = 'Activo';
```

**Caso 2**

|Codigo Requerimiento|	R301|
|---|---|
|Codigo Interfaz|	I302|
|Imagen Interfaz|![image (1)](https://github.com/user-attachments/assets/baab3e8f-b625-471e-97b1-da7446df441c) ![image (2)](https://github.com/user-attachments/assets/4551a392-279d-47ff-8c7b-522fb3627a4f)|

Eventos:

1. Al entrar a "registrar servicio" y llenar todo, al presionar el boton "enviar" se registrada una nueva invitacion.

``` sql

INSERT INTO Invitacion (ID_invitacion, Asunto_Invitacion, Requerimientos_Invitacion, Fecha_Envio, Tiempo_Maximo, Bases_Cotizacion, Direccion_Proyecto, Comentarios, Estado_Invitacion, ID_cliente) values 
(?,<1>,<2>,CURRENT_DATE,<3>,<4>,<5>,<6>,'No Revisado',?);
```

**Caso 3**

|Codigo Requerimiento	|R302|
|---|---|
|Codigo Interfaz|	I303|
|Imagen Interfaz|	![image (3)](https://github.com/user-attachments/assets/8bace767-fac5-4079-95ba-24938b431da0)|

Eventos:

1. Al inicializar la pagina se mostrara una lista de cliente.

``` sql

SELECT 
    cli.Nombre AS Nombre_Cliente
FROM 
    Cliente cli 
LEFT JOIN Adjudicacion adj ON cli.ID_cliente = adj.ID_cliente 
LEFT JOIN Invitacion inv ON cli.ID_cliente = inv.ID_cliente  
WHERE 
    adj.Estado_Adjudicacion IN ('Aceptado', 'No aceptado') 
    OR inv.Estado_Invitacion IN ('Revisado', 'No revisado');
```

**Caso 4**

|Codigo Requerimiento|	R302|
|---|---|
|Codigo Interfaz	|I304|
|Imagen Interfaz|![image (15)](https://github.com/user-attachments/assets/2771d31e-98c4-4c6c-8e0f-cd8bee7a2225) ![image (16)](https://github.com/user-attachments/assets/c3a5e4a0-2a29-4cf8-813b-89c860ff8ab5)|

Eventos:

1. Al inicializar la pagina se vera la invitacion del cliente.

``` sql
SELECT 
    cli.Nombre AS Nombre_Cliente,
    inv.Asunto_Invitacion,
    inv.Requerimientos_Invitacion,
    inv.Tiempo_Maximo,
    inv.Bases_Cotizacion,
    inv.Direccion_Proyecto,
    inv.Comentarios
FROM 
    Invitacion inv
LEFT JOIN 
    Cliente cli ON inv.ID_cliente = cli.ID_cliente WHERE inv.estado_invitacion = 'Revisado';

SELECT 
    inf.stock_real AS Stock_Disponible 
FROM 
    Informe_stock inf
WHERE 
    inf.Fecha_generacion = (
        SELECT MAX(Fecha_generacion) 
        FROM Informe_stock
    );
```

2. Al presionar el boton "Si se participara".

``` sql

INSERT INTO Revision_tecnica (
    ID_revision_tecnica, 
    Estado_Participacion, 
    ID_empleado, 
    ID_invitacion, 
    ID_informe_stock
) 
VALUES 
    (?, 'Aceptado', (SELECT e.ID_empleado FROM empleado e WHERE e.tipo_empleado = 'Administrador Comercial'), (SELECT cli.ID_cliente FROM cliente cli WHERE cli.nombre = <3>), ?);
```

3. Al presionar el boton "No se participara".

``` sql

INSERT INTO Revision_tecnica (
    ID_revision_tecnica, 
    Estado_Participacion, 
    ID_empleado, 
    ID_invitacion, 
    ID_informe_stock
) 
VALUES 
    (?, 'Rechazado', (SELECT e.ID_empleado FROM empleado e WHERE e.tipo_empleado = 'Administrador Comercial'), (SELECT cli.ID_cliente FROM cliente cli WHERE cli.nombre = <3>), ?);
```

4. Al presionar cualquiera de los 2 botones se actualizar el estado de la invitacion.

``` sql

UPDATE Invitacion
SET Estado_Invitacion = 'Revisado'
FROM Cliente
WHERE Invitacion.ID_cliente = Cliente.ID_cliente
  AND Cliente.Nombre = <3>
  AND Invitacion.Estado_Invitacion = 'No revisado';
```

**Caso 5**

|Codigo Requerimiento|	R303|
|---|---|
|Codigo Interfaz|	I305|
|Imagen Interfaz|![image (6)](https://github.com/user-attachments/assets/42104eff-2d59-4bc3-8862-7153865e2049) ![image (7)](https://github.com/user-attachments/assets/3adfe4be-0fd0-4160-8ab4-d13827f60823) ![image (8)](https://github.com/user-attachments/assets/951fd0e2-3567-428d-af13-b1718d33e1e5) ![image (9)](https://github.com/user-attachments/assets/8d70e9ff-2d7c-4d0b-a8c3-f23cebc58344)|

Eventos:

1. Al entrar a esta pagina y llenar todo, al presionar el boton "Enviar propuesta" se registrada una nueva propuesta.

``` sql

INSERT INTO Presentacion_propuesta (
    ID_presentacion_propuesta, 
    Fecha_Presentacion, 
    Precio_Propuesto, 
    Descripcion_Tecnica, 
    Descripcion_Economica, 
    Calidad_Ofrecida, 
    Seguridad_Ofrecida, 
    Garantias, 
    Beneficios, 
    Condiciones_Pago, 
    Plazos_Ejecucion, 
    Obervaciones_Propuesta, 
    ID_empleado, 
    ID_revision_tecnica, 
    ID_cliente
) 
VALUES 
    (?, CURRENT_DATE, <3>, <1>, <2>, <4>, <5>, <6>, <7>, <8>, <9>, <10>, (SELECT e.ID_empleado FROM empleado e WHERE e.tipo_empleado = 'Administrador Comercial'), ?, (SELECT cli.ID_cliente FROM cliente cli WHERE cli.nombre = <11>));
```

**Caso 6**

|Codigo Requerimiento|	R304|
|---|---|
|Codigo Interfaz|	I306|
|Imagen Interfaz|![image (10)](https://github.com/user-attachments/assets/3806aacd-8d07-470c-a1df-a2b22f16dcf5) ![image (11)](https://github.com/user-attachments/assets/7c53f56f-4a4f-4d26-aa4b-9ae30fdbbb9c) ![image (12)](https://github.com/user-attachments/assets/2a3de869-9bc2-48ff-b9a9-1b285ec7e543) ![image (13)](https://github.com/user-attachments/assets/77ecfd53-dc79-431d-9d19-69947b04b826)|

Eventos:

1. Al presionar el boton "Estado de servicio" al recibir la propuesta.

``` sql

SELECT 
    pro.Precio_Propuesto, 
    pro.Descripcion_Tecnica, 
    pro.Descripcion_Economica, 
    pro.Calidad_Ofrecida, 
    pro.Seguridad_Ofrecida, 
    pro.Garantias, 
    pro.Beneficios, 
    pro.Condiciones_Pago, 
    pro.Plazos_Ejecucion, 
    pro.Obervaciones_Propuesta 
FROM 
    Presentacion_propuesta pro 
LEFT JOIN Revision_tecnica rev ON pro.ID_revision_tecnica = rev.ID_revision_tecnica 
WHERE 
    rev.Estado_Participacion = 'Si Participar';
```

2. Al presionar el boton "Aceptar propuesta".

``` sql

INSERT INTO Adjudicacion (ID_adjudicacion, Fecha_Adjudicacion, Estado_Adjudicacion, ID_presentacion_propuesta, ID_cliente)
VALUES (?, CURRENT_DATE, 'Aceptado', ?, ?);
```

3. Al presionar el boton "Rechazar propuesta".

``` sql

INSERT INTO Adjudicacion (ID_adjudicacion, Fecha_Adjudicacion, Estado_Adjudicacion, ID_presentacion_propuesta, ID_cliente)
VALUES (?, CURRENT_DATE, 'No Aceptado', ?, ?);
```

## 4. Sentencias SQL del módulo de

## 5. Sentencias SQL del módulo de

## 6. Sentencias SQL del módulo de
